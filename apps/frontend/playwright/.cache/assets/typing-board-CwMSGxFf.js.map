{"version":3,"file":"typing-board-CwMSGxFf.js","sources":["../../../src/entities/typing-text/domain/typing-engine.ts","../../../src/entities/typing-text/model/queries.ts","../../../src/entities/typing-text/model/use-cursor-positioning.ts","../../../src/entities/typing-text/model/use-typing.ts","../../../src/entities/typing-text/ui/caret.tsx","../../../src/entities/typing-text/ui/character.tsx","../../../src/entities/typing-text/ui/word.tsx","../../../src/entities/typing-text/ui/text-display.tsx","../../../src/features/typing/compose/typing-session-layout.tsx","../../../src/shared/ui/icon/refresh-icon.tsx","../../../src/features/typing/ui/restart-button.tsx","../../../src/features/typing/ui/typing-config-summary.tsx","../../../src/features/typing/ui/typing-status-indicator.tsx","../../../src/widgets/typing-board/ui/typing-board.tsx"],"sourcesContent":["/**\n * Calculates the new typed string after a Backspace event.\n */\nexport function calculateBackspace(\n\tcurrent: string,\n\tconfirmedIndex: number,\n\tisCtrlKey: boolean,\n): string {\n\tif (current.length <= confirmedIndex) return current;\n\n\tif (isCtrlKey) {\n\t\tconst textAfterConfirmed = current.slice(confirmedIndex);\n\t\tconst trimmed = textAfterConfirmed.trimEnd();\n\t\tconst diff = textAfterConfirmed.length - trimmed.length;\n\n\t\t// If end of word or middle\n\t\tif (diff === 0) {\n\t\t\tconst lastSpace = trimmed.lastIndexOf(' ');\n\t\t\tif (lastSpace === -1) {\n\t\t\t\treturn current.slice(0, confirmedIndex);\n\t\t\t}\n\t\t\treturn current.slice(0, confirmedIndex + lastSpace + 1);\n\t\t}\n\n\t\t// Trailing spaces: delete spaces AND previous word\n\t\tconst content = trimmed;\n\t\tconst lastSpace = content.lastIndexOf(' ');\n\t\tif (lastSpace === -1) {\n\t\t\treturn current.slice(0, confirmedIndex);\n\t\t}\n\t\treturn current.slice(0, confirmedIndex + lastSpace + 1);\n\t}\n\n\treturn current.slice(0, -1);\n}\n\n/**\n * Validates and appends a new character to the typed string.\n */\nexport function appendCharacter(current: string, char: string): string {\n\tif (char === ' ') {\n\t\t// Prevent space if at start\n\t\tif (current.length === 0) return current;\n\t\t// Prevent double spaces\n\t\tif (current.endsWith(' ')) return current;\n\t}\n\n\treturn current + char;\n}\n\n/**\n * Checks if the current word is completed correctly and returns the new confirmed index.\n * Returns null if the word is not completed or incorrect.\n */\nexport function checkWordCompletion(\n\ttyped: string,\n\ttargetText: string,\n): number | null {\n\t// We only check on space\n\tif (!typed.endsWith(' ')) return null;\n\n\t// Calculate which word index we are on based on spaces in 'typed'\n\t// 'typed' has just been updated with a space at the end.\n\t// So \"word \" has 1 space -> word index 0.\n\t// \"word1 word2 \" has 2 spaces -> word index 1.\n\n\t// The space count in 'typed' includes the one just typed.\n\tconst spaceCount = (typed.match(/ /g) || []).length;\n\tconst wordIndex = spaceCount - 1; // 0-based index of the word just finished\n\n\tconst targetWords = targetText.split(' ');\n\n\tif (wordIndex < targetWords.length) {\n\t\tconst targetWord = targetWords[wordIndex];\n\n\t\t// We need to extract the LAST typed word to check correctness.\n\t\t// `typed` contains everything.\n\t\t// If we split by space, we get all words.\n\t\t// The last one is empty because `typed` ends with space.\n\t\t// The one before that is the word we just finished.\n\n\t\tconst userWords = typed.split(' ');\n\t\t// userWords = [\"word1\", \"word2\", \"\"]\n\t\tconst lastTypedWord = userWords[wordIndex];\n\n\t\tif (lastTypedWord === targetWord) {\n\t\t\treturn typed.length;\n\t\t}\n\t}\n\n\treturn null;\n}\n\n/**\n * Calculates the visual cursor index based on target text and user input.\n * Handles skipping incomplete words (jumps).\n */\nexport function calculateCursorIndex(\n\ttargetText: string,\n\tuserTyped: string,\n): number {\n\tconst targetWords = targetText.split(' ');\n\tconst userWords = userTyped.split(' ');\n\tconst activeWordIndex = userWords.length - 1;\n\tconst activeWordChars = userWords[activeWordIndex]?.length ?? 0;\n\n\tlet calculatedIndex = 0;\n\t// Iterate over previous words to calculate their visual length\n\tfor (let i = 0; i < activeWordIndex; i++) {\n\t\tif (i >= targetWords.length) break;\n\n\t\tconst targetWord = targetWords[i];\n\t\t// Safety check if targetWord is undefined (though logic shouldn't reach here if loop is correct)\n\t\tif (typeof targetWord === 'undefined') break;\n\n\t\tconst userWord = userWords[i] || '';\n\n\t\t// The visual length of a word is determined by the max length\n\t\t// between target and user input (to account for extra chars)\n\t\tconst maxLength = Math.max(targetWord.length, userWord.length);\n\t\tcalculatedIndex += maxLength;\n\n\t\t// Add space if it exists in layout\n\t\tif (i < targetWords.length - 1) {\n\t\t\tcalculatedIndex++;\n\t\t}\n\t}\n\n\t// Add progress in current word\n\tcalculatedIndex += activeWordChars;\n\n\treturn calculatedIndex;\n}\n","import { queryOptions } from '@tanstack/react-query';\n\nexport const wordQueries = {\n\tall: () => ['words'] as const,\n\tlist: () =>\n\t\tqueryOptions({\n\t\t\tqueryKey: wordQueries.all(),\n\t\t\tqueryFn: async () => {\n\t\t\t\tconst response = await fetch('/api/words');\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error('Failed to fetch words');\n\t\t\t\t}\n\t\t\t\treturn response.json() as Promise<string[]>;\n\t\t\t},\n\t\t\trefetchOnWindowFocus: false,\n\t\t}),\n};\n","import { type RefObject, useCallback } from 'react';\n\nexport function useCursorPositioning(\n\tcontainerRef: RefObject<HTMLElement | null>,\n\tsetCaretPos: (pos: { left: number; top: number }) => void,\n) {\n\treturn useCallback(\n\t\t(cursorIndex: number) => {\n\t\t\tif (!containerRef.current) return;\n\n\t\t\tconst activeEl = containerRef.current.querySelector(\n\t\t\t\t`[data-index=\"${cursorIndex}\"]`,\n\t\t\t) as HTMLElement;\n\n\t\t\tif (activeEl) {\n\t\t\t\tsetCaretPos({ left: activeEl.offsetLeft, top: activeEl.offsetTop });\n\t\t\t} else {\n\t\t\t\t// Fallback: if we are at the very end or off-screen\n\t\t\t\tconst prevIndex = cursorIndex - 1;\n\t\t\t\tconst prevEl = containerRef.current.querySelector(\n\t\t\t\t\t`[data-index=\"${prevIndex}\"]`,\n\t\t\t\t) as HTMLElement;\n\n\t\t\t\tif (prevEl) {\n\t\t\t\t\tsetCaretPos({\n\t\t\t\t\t\tleft: prevEl.offsetLeft + prevEl.offsetWidth,\n\t\t\t\t\t\ttop: prevEl.offsetTop,\n\t\t\t\t\t});\n\t\t\t\t} else if (cursorIndex === 0) {\n\t\t\t\t\t// Start of test, if element 0 exists\n\t\t\t\t\tconst firstEl = containerRef.current.querySelector(\n\t\t\t\t\t\t'[data-index=\"0\"]',\n\t\t\t\t\t) as HTMLElement;\n\t\t\t\t\tif (firstEl) {\n\t\t\t\t\t\tsetCaretPos({\n\t\t\t\t\t\t\tleft: firstEl.offsetLeft,\n\t\t\t\t\t\t\ttop: firstEl.offsetTop,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[containerRef, setCaretPos],\n\t);\n}\n","import { type RefObject, useCallback, useEffect, useState } from 'react';\nimport {\n\tappendCharacter,\n\tcalculateBackspace,\n\tcalculateCursorIndex,\n\tcheckWordCompletion,\n} from '../domain/typing-engine';\nimport { useCursorPositioning } from './use-cursor-positioning';\n\nexport function useTyping(\n\ttargetText: string,\n\tcontainerRef: RefObject<HTMLElement | null>,\n) {\n\tconst [userTyped, setUserTyped] = useState('');\n\tconst [confirmedIndex, setConfirmedIndex] = useState(0);\n\tconst [caretPos, setCaretPos] = useState({ left: 0, top: 0 });\n\tconst [replayData, setReplayData] = useState<\n\t\t{ key: string; timestamp: number }[]\n\t>([]);\n\tconst [startTime, setStartTime] = useState<number | null>(null);\n\n\tconst updateCursor = useCursorPositioning(containerRef, setCaretPos);\n\n\tconst handleKeyDown = useCallback(\n\t\t(event: KeyboardEvent) => {\n\t\t\t// Ignore if modifier keys are pressed (except Shift and Ctrl/Meta for Backspace)\n\t\t\tif (event.altKey) return;\n\t\t\tif ((event.ctrlKey || event.metaKey) && event.key !== 'Backspace') return;\n\n\t\t\tif (!startTime) setStartTime(Date.now());\n\t\t\tconst timestamp = Date.now() - (startTime || Date.now());\n\n\t\t\tif (event.key === 'Backspace') {\n\t\t\t\tsetReplayData((prev) => [...prev, { key: 'Backspace', timestamp }]);\n\t\t\t\tconst next = calculateBackspace(\n\t\t\t\t\tuserTyped,\n\t\t\t\t\tconfirmedIndex,\n\t\t\t\t\tevent.ctrlKey || event.metaKey,\n\t\t\t\t);\n\t\t\t\tsetUserTyped(next);\n\n\t\t\t\tconst nextIndex = calculateCursorIndex(targetText, next);\n\t\t\t\trequestAnimationFrame(() => updateCursor(nextIndex));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.key.length === 1) {\n\t\t\t\t// Prevent default action for space to avoid scrolling\n\t\t\t\tif (event.key === ' ') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\n\t\t\t\tsetReplayData((prev) => [\n\t\t\t\t\t...prev,\n\t\t\t\t\t{ key: event.key, timestamp: Date.now() - (startTime || Date.now()) },\n\t\t\t\t]);\n\n\t\t\t\tconst next = appendCharacter(userTyped, event.key);\n\n\t\t\t\t// If input didn't change (invalid space), do nothing\n\t\t\t\tif (next === userTyped) return;\n\n\t\t\t\tsetUserTyped(next);\n\n\t\t\t\t// Check word completion if space was typed\n\t\t\t\tif (event.key === ' ') {\n\t\t\t\t\tconst newConfirmedIndex = checkWordCompletion(next, targetText);\n\t\t\t\t\tif (newConfirmedIndex !== null) {\n\t\t\t\t\t\tsetConfirmedIndex(newConfirmedIndex);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst nextIndex = calculateCursorIndex(targetText, next);\n\t\t\t\trequestAnimationFrame(() => updateCursor(nextIndex));\n\t\t\t}\n\t\t},\n\t\t[targetText, confirmedIndex, updateCursor, userTyped],\n\t);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\treturn () => window.removeEventListener('keydown', handleKeyDown);\n\t}, [handleKeyDown]);\n\n\tconst reset = useCallback(() => {\n\t\tsetUserTyped('');\n\t\tsetConfirmedIndex(0);\n\t\t// Reset cursor\n\t\trequestAnimationFrame(() => updateCursor(0));\n\t}, [updateCursor]);\n\n\treturn {\n\t\tuserTyped,\n\t\tcaretPos,\n\t\treset,\n\t\treplayData,\n\t\tsetUserTyped,\n\t\tsetReplayData,\n\t};\n}\n","interface CaretProps {\n\tleft: number;\n\ttop: number;\n}\n\nexport function Caret({ left, top }: CaretProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"absolute w-0.5 h-[1.5em] bg-[#e2b714]\"\n\t\t\tdata-testid=\"cursor\"\n\t\t\tstyle={{\n\t\t\t\tleft,\n\t\t\t\ttop,\n\t\t\t\ttransition:\n\t\t\t\t\t'left 0.2s cubic-bezier(0.4, 1, 0.5, 1), top 0.2s cubic-bezier(0.4, 1, 0.5, 1)',\n\t\t\t}}\n\t\t/>\n\t);\n}\n","interface CharacterProps {\n\tchar: string;\n\tcolor: string;\n\tindex: number;\n\ttype?: string;\n\tstatus?: string;\n\twidth?: string;\n}\n\nexport function Character({\n\tchar,\n\tcolor,\n\tindex,\n\ttype = 'target',\n\tstatus = 'untyped',\n\twidth,\n}: CharacterProps) {\n\treturn (\n\t\t<span\n\t\t\tdata-index={index}\n\t\t\tdata-testid=\"char\"\n\t\t\tdata-type={type}\n\t\t\tdata-status={status}\n\t\t\tdata-char-value={char}\n\t\t\tclassName=\"inline-block\"\n\t\t\tstyle={{ color, width }}\n\t\t>\n\t\t\t{char === ' ' ? '\\u00A0' : char}\n\t\t</span>\n\t);\n}\n","import type { ReactNode } from 'react';\n\ninterface WordProps {\n\tchildren: ReactNode;\n\tindex: number;\n\tstate: string;\n\thasError: boolean;\n}\n\nexport function Word({ children, index, state, hasError }: WordProps) {\n\treturn (\n\t\t<span\n\t\t\tkey={index}\n\t\t\tdata-testid=\"word\"\n\t\t\tdata-state={state}\n\t\t\tdata-has-error={hasError}\n\t\t\tclassName={`inline-block mr-0 border-b-2 ${\n\t\t\t\thasError ? 'border-[#ca4754]' : 'border-transparent'\n\t\t\t}`}\n\t\t>\n\t\t\t{children}\n\t\t</span>\n\t);\n}\n","import { type ComponentProps, type RefObject } from 'react';\nimport { Caret } from './caret';\nimport { Character } from './character';\nimport { Word } from './word';\n\ninterface TextDisplayProps extends ComponentProps<'div'> {\n\ttargetText: string;\n\tuserTyped: string;\n\tcaretPos: { left: number; top: number };\n\tcontainerRef: RefObject<HTMLDivElement | null>;\n}\n\nexport function TextDisplay({\n\ttargetText,\n\tuserTyped,\n\tcaretPos,\n\tcontainerRef,\n\tclassName,\n\t...props\n}: TextDisplayProps) {\n\tlet globalIndex = 0;\n\tconst targetWords = targetText.split(' ');\n\tconst userWords = userTyped.split(' ');\n\n\treturn (\n\t\t<div\n\t\t\tref={containerRef}\n\t\t\tclassName={`font-mono text-2xl leading-relaxed wrap-break-word relative ${className}`}\n\t\t\tdata-testid=\"text-display\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<Caret left={caretPos.left} top={caretPos.top} />\n\t\t\t{targetWords.map((targetWord, wordIndex) => {\n\t\t\t\tconst userWord = userWords[wordIndex] || '';\n\n\t\t\t\t// Determine state\n\t\t\t\tconst isPast = userWords.length > wordIndex + 1;\n\t\t\t\tconst isActive = userWords.length === wordIndex + 1;\n\n\t\t\t\tlet wordState = 'upcoming';\n\t\t\t\tif (isPast) wordState = 'past';\n\t\t\t\telse if (isActive) wordState = 'active';\n\n\t\t\t\tconst isCorrectWord = userWord === targetWord;\n\t\t\t\tconst hasExtras = userWord.length > targetWord.length;\n\n\t\t\t\tconst hasError = (isPast && !isCorrectWord) || hasExtras;\n\n\t\t\t\t// We render max length to accommodate extras\n\t\t\t\tconst maxLength = Math.max(targetWord.length, userWord.length);\n\n\t\t\t\tconst chars = [];\n\t\t\t\tfor (let i = 0; i < maxLength; i++) {\n\t\t\t\t\tconst charIndex = globalIndex++; // Assign unique index to every rendered char\n\n\t\t\t\t\tconst targetChar = targetWord[i]; // Might be undefined if extra\n\t\t\t\t\tconst userChar = userWord[i]; // Might be undefined if untyped\n\n\t\t\t\t\tlet charToRender = targetChar;\n\t\t\t\t\tlet color = '#646669'; // Default untyped\n\n\t\t\t\t\tlet charType = 'target';\n\t\t\t\t\tlet charStatus = 'untyped';\n\n\t\t\t\t\tif (i < userWord.length) {\n\t\t\t\t\t\t// User typed something here\n\n\t\t\t\t\t\tif (i < targetWord.length) {\n\t\t\t\t\t\t\t// Within bounds: Show TARGET char\n\t\t\t\t\t\t\tcharToRender = targetChar;\n\t\t\t\t\t\t\tif (userChar === targetChar) {\n\t\t\t\t\t\t\t\tcolor = '#d1d0c5';\n\t\t\t\t\t\t\t\tcharStatus = 'correct';\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcolor = '#ca4754';\n\t\t\t\t\t\t\t\tcharStatus = 'incorrect';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Extra character: Show USER char\n\t\t\t\t\t\t\tcharToRender = userChar;\n\t\t\t\t\t\t\tcolor = '#7e2a33';\n\t\t\t\t\t\t\tcharType = 'extra';\n\t\t\t\t\t\t\tcharStatus = 'extra'; // Or incorrect?\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Untyped part of target\n\t\t\t\t\t\tcharToRender = targetChar;\n\t\t\t\t\t}\n\n\t\t\t\t\tchars.push(\n\t\t\t\t\t\t<Character\n\t\t\t\t\t\t\tkey={charIndex}\n\t\t\t\t\t\t\tindex={charIndex}\n\t\t\t\t\t\t\tchar={charToRender ?? ''}\n\t\t\t\t\t\t\tcolor={color}\n\t\t\t\t\t\t\ttype={charType}\n\t\t\t\t\t\t\tstatus={charStatus}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Logic for space\n\t\t\t\tconst showSpace = wordIndex < targetWords.length - 1;\n\t\t\t\tlet spaceEl = null;\n\n\t\t\t\tif (showSpace) {\n\t\t\t\t\tconst spaceIndex = globalIndex++;\n\t\t\t\t\tconst isSpaceTyped = userWords.length > wordIndex + 1;\n\n\t\t\t\t\tspaceEl = (\n\t\t\t\t\t\t<Character\n\t\t\t\t\t\t\tkey={spaceIndex}\n\t\t\t\t\t\t\tindex={spaceIndex}\n\t\t\t\t\t\t\tchar=\" \"\n\t\t\t\t\t\t\tcolor=\"#646669\"\n\t\t\t\t\t\t\ttype=\"space\"\n\t\t\t\t\t\t\tstatus={isSpaceTyped ? 'typed' : 'untyped'}\n\t\t\t\t\t\t\twidth=\"0.5ch\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<span key={wordIndex}>\n\t\t\t\t\t\t<Word index={wordIndex} state={wordState} hasError={hasError}>\n\t\t\t\t\t\t\t{chars}\n\t\t\t\t\t\t</Word>\n\t\t\t\t\t\t{spaceEl}\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n}\n","import type { ReactNode } from 'react';\n\ninterface TypingSessionLayoutProps {\n\tconfig: ReactNode;\n\tboard: ReactNode;\n\tcontrols: ReactNode;\n\tstate?: 'loading' | 'error' | 'ready';\n\tloadingFallback?: ReactNode;\n\terrorFallback?: ReactNode;\n}\n\nexport function TypingSessionLayout({\n\tconfig,\n\tboard,\n\tcontrols,\n\tstate = 'ready',\n\tloadingFallback,\n\terrorFallback,\n}: TypingSessionLayoutProps) {\n\tif (state === 'loading' && loadingFallback) {\n\t\treturn <>{loadingFallback}</>;\n\t}\n\n\tif (state === 'error' && errorFallback) {\n\t\treturn <>{errorFallback}</>;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"flex flex-col gap-8 w-full max-w-3xl\"\n\t\t\tdata-testid=\"typing-board\"\n\t\t>\n\t\t\t{/* Top: Config Summary */}\n\t\t\t<div data-testid=\"config-summary\" className=\"flex justify-center\">\n\t\t\t\t{config}\n\t\t\t</div>\n\n\t\t\t{/* Middle: Typing Text Area */}\n\t\t\t<div className=\"relative min-h-37.5\">{board}</div>\n\n\t\t\t{/* Bottom: Restart Button */}\n\t\t\t<div className=\"flex justify-center mt-8\">{controls}</div>\n\t\t</div>\n\t);\n}\n","export function RefreshIcon({ className }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstrokeWidth=\"2\"\n\t\t\tstrokeLinecap=\"round\"\n\t\t\tstrokeLinejoin=\"round\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path d=\"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\" />\n\t\t\t<path d=\"M3 3v5h5\" />\n\t\t\t<path d=\"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16\" />\n\t\t\t<path d=\"M21 21v-5h-5\" />\n\t\t</svg>\n\t);\n}\n","import { RefreshIcon } from '@/shared/ui/icon/refresh-icon';\n\ninterface RestartButtonProps {\n\tonReset: () => void;\n\tclassName?: string;\n}\n\nexport function RestartButton({ onReset, className }: RestartButtonProps) {\n\treturn (\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tonClick={onReset}\n\t\t\tdata-testid=\"restart-button\"\n\t\t\tclassName={`text-[#646669] hover:text-[#d1d0c5] transition-colors p-4 rounded cursor-pointer ${className}`}\n\t\t\taria-label=\"Restart Test\"\n\t\t>\n\t\t\t<RefreshIcon className=\"w-6 h-6\" />\n\t\t</button>\n\t);\n}\n","interface TypingConfigSummaryProps {\n\tlanguage?: string;\n\tmode?: string;\n}\n\nexport function TypingConfigSummary({\n\tlanguage = 'English',\n\tmode = 'words',\n}: TypingConfigSummaryProps) {\n\treturn (\n\t\t<div className=\"flex gap-4 text-[#646669] text-sm\">\n\t\t\t<span>{language}</span>\n\t\t\t<span>â€¢</span>\n\t\t\t<span>{mode}</span>\n\t\t</div>\n\t);\n}\n","interface TypingStatusIndicatorProps {\n\tstate: 'loading' | 'error';\n\tmessage?: string;\n}\n\nexport function TypingStatusIndicator({\n\tstate,\n\tmessage,\n}: TypingStatusIndicatorProps) {\n\tif (state === 'loading') {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tdata-testid=\"loading-state\"\n\t\t\t\tclassName=\"flex justify-center items-center h-50 text-[#646669]\"\n\t\t\t>\n\t\t\t\t{message || 'Loading...'}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tdata-testid=\"error-state\"\n\t\t\tclassName=\"flex justify-center items-center h-50 text-[#ca4754]\"\n\t\t>\n\t\t\t{message || 'Failed to load words.'}\n\t\t</div>\n\t);\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { useRef } from 'react';\nimport { TextDisplay, useTyping, wordQueries } from '@/entities/typing-text';\nimport {\n\tRestartButton,\n\tTypingConfigSummary,\n\tTypingSessionLayout,\n\tTypingStatusIndicator,\n} from '@/features/typing/pub';\n\nexport function TypingBoard() {\n\tconst {\n\t\tdata: words,\n\t\tisLoading,\n\t\tisError,\n\t\trefetch,\n\t} = useQuery(wordQueries.list());\n\n\tconst containerRef = useRef<HTMLDivElement>(null);\n\n\tconst text = words ? words.join(' ') : '';\n\tconst { userTyped, caretPos, reset } = useTyping(text, containerRef);\n\n\tconst handleReset = () => {\n\t\trefetch();\n\t\treset();\n\t};\n\n\treturn (\n\t\t<TypingSessionLayout\n\t\t\tstate={isLoading ? 'loading' : isError ? 'error' : 'ready'}\n\t\t\tloadingFallback={<TypingStatusIndicator state=\"loading\" />}\n\t\t\terrorFallback={<TypingStatusIndicator state=\"error\" />}\n\t\t\tconfig={<TypingConfigSummary />}\n\t\t\tboard={\n\t\t\t\t<TextDisplay\n\t\t\t\t\ttargetText={text}\n\t\t\t\t\tuserTyped={userTyped}\n\t\t\t\t\tcaretPos={caretPos}\n\t\t\t\t\tcontainerRef={containerRef}\n\t\t\t\t\tclassName=\"wrap-break-word text-justify\"\n\t\t\t\t/>\n\t\t\t}\n\t\t\tcontrols={<RestartButton onReset={handleReset} />}\n\t\t/>\n\t);\n}\n"],"names":["lastSpace","useCallback","useState","useEffect","jsx","jsxs","useRef"],"mappings":"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"}