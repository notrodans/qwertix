# User Story: Authentication & Initial Setup

**ID:** US001  
**Priority:** High  
**Estimate:** Large  
**Epic:** Core Infrastructure

## Story

As a user or administrator, I want a secure way to manage identity and application setup so that I can track performance, secure the platform, and manage access.

## Acceptance Criteria

- [ ] System automatically detects if initial setup is required (no users in database)
- [ ] Admin can create the first superuser account via the setup page
- [ ] Registered users can log in using credentials and receive a JWT for authentication
- [ ] Administrators can onboard new users (public registration is restricted)
- [ ] All room actions (joining, racing) are linked to a registered user when authenticated
- [ ] Header displays current username and provides logout options

## Notes

- Uses `@fastify/jwt` and `@fastify/passport` on the backend
- Implements role-based access control (Admin, User, Guest)
- Backend must strictly verify "no users exist" before allowing access to the setup endpoint

## Tasks

- [ ] Implement `isSetupRequired` logic in `AuthService`
- [ ] Create Setup page and form logic in frontend
- [ ] Implement login and logout flows with JWT handling
- [ ] Add session identity verification to WebSocket connections
